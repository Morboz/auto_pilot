ä¸‹é¢ç»™ä½  **å®Œæ•´çš„æ•°æ®åº“ ER å›¾ï¼ˆAgent / Tool / Task / Logsï¼‰**ï¼Œè¿™æ˜¯ä¸ºâ€œè‡ªä¸»ä»»åŠ¡æ‰§è¡Œ Agent æ¡†æ¶â€è®¾è®¡çš„æœ€åˆç†ã€å¯æ‰©å±•çš„æ•°æ®åº“ç»“æ„ï¼Œé€‚ç”¨äº PostgreSQL / MySQL / SQLiteã€‚

å›¾ä¸­åŒ…å«ï¼š

* **Agent é…ç½®**
* **Tool æ³¨å†Œè¡¨**
* **Agentâ€“Tool ç»‘å®šï¼ˆå¤šå¯¹å¤šï¼‰**
* **Task ä»»åŠ¡å®ä¾‹**
* **Task Logsï¼ˆReAct é£æ ¼ step logsï¼‰**
* **Tool Execution Logsï¼ˆå•ç‹¬è·Ÿè¸ªæ¯æ¬¡å·¥å…·è°ƒç”¨ï¼‰**

ä¸‹é¢ç»™ä½  **ASCII é£æ ¼ ER å›¾ + æ¯ä¸ªè¡¨çš„è¯¦ç»†å­—æ®µè§£é‡Š**ã€‚

---

# ğŸ§© **æ•°æ®åº“ ER å›¾ï¼ˆæ ¸å¿ƒæ¨¡å—ï¼‰**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      agents        â”‚ 1       *â”‚    agent_tools     â”‚*       1 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚----------â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚----------â”‚       tools       â”‚
â”‚ id (PK)            â”‚          â”‚ id (PK)            â”‚          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ name               â”‚          â”‚ agent_id (FK)      â”‚          â”‚ id (PK)           â”‚
â”‚ model              â”‚          â”‚ tool_id  (FK)      â”‚          â”‚ name              â”‚
â”‚ system_prompt      â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ type              â”‚
â”‚ created_at         â”‚                                          â”‚ description       â”‚
â”‚ updated_at         â”‚                                          â”‚ schema (JSON)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚ created_at        â”‚
                                                                â”‚ updated_at        â”‚
                                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

          1 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  *    
agents â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tasks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ id (PK)            â”‚           â”‚
            â”‚ agent_id (FK)      â”‚           â”‚
            â”‚ input_text         â”‚           â”‚
            â”‚ status             â”‚           â”‚
            â”‚ result_text        â”‚           â”‚
            â”‚ meta (JSON)        â”‚           â”‚
            â”‚ created_at         â”‚           â”‚
            â”‚ updated_at         â”‚           â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                                             â”‚
                                   1         â”‚       *     
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚        task_logs          â”‚
                                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                                 â”‚ id (PK)                   â”‚
                                 â”‚ task_id (FK)              â”‚
                                 â”‚ step_number               â”‚
                                 â”‚ type (thought/action/obs) â”‚
                                 â”‚ content (TEXT/JSON)       â”‚
                                 â”‚ created_at                â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                         1             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             *
tasks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   tool_execution_logs    â”‚
                                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                                       â”‚ id (PK)                 â”‚
                                       â”‚ task_id (FK)            â”‚
                                       â”‚ tool_id (FK)            â”‚
                                       â”‚ input_params (JSON)     â”‚
                                       â”‚ output (JSON)           â”‚
                                       â”‚ error_message           â”‚
                                       â”‚ created_at              â”‚
                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# ğŸŸ¥ **è¡¨ 1ï¼šagentsï¼ˆè‡ªå®šä¹‰ Agent é…ç½®ï¼‰**

### ç”¨é€”

å­˜å‚¨æ¯ä¸ªç”¨æˆ·åˆ›å»ºçš„ Agentï¼ˆç±»ä¼¼ Claude Projects æˆ– Claude Code çš„ Agent Profileï¼‰ã€‚

### å­—æ®µå®šä¹‰

| å­—æ®µ            | ç±»å‹       | è¯´æ˜                |
| ------------- | -------- | ----------------- |
| id            | PK, UUID | Agent ID          |
| name          | string   | å¯è¯»åç§°              |
| model         | string   | ä½¿ç”¨æ¨¡å‹åç§°ï¼ˆå¦‚ gpt-5-1ï¼‰ |
| system_prompt | text     | Agent çš„äººæ ¼ä¸æŒ‡ä»¤      |
| created_at    | datetime | åˆ›å»ºæ—¶é—´              |
| updated_at    | datetime | æ›´æ–°æ—¶é—´              |

---

# ğŸŸ¦ **è¡¨ 2ï¼štoolsï¼ˆå·¥å…·æ³¨å†Œè¡¨ï¼‰**

### ç”¨é€”

å­˜å‚¨å¼€å‘è€…æ³¨å†Œçš„ Toolã€‚

### å­—æ®µå®šä¹‰

| å­—æ®µ          | ç±»å‹                            | è¯´æ˜                       |
| ----------- | ----------------------------- | ------------------------ |
| id          | PK, UUID                      | Tool ID                  |
| name        | string                        | å·¥å…·åå­—ï¼ˆå¦‚ HTTP GETï¼‰         |
| type        | enum(http/sql/web3/js/custom) | å·¥å…·ç±»å‹                     |
| description | text                          | å·¥å…·è¯´æ˜                     |
| schema      | JSON                          | å·¥å…·å‚æ•° schemaï¼ˆJSON Schemaï¼‰ |
| created_at  | datetime                      | åˆ›å»ºæ—¶é—´                     |
| updated_at  | datetime                      | æ›´æ–°æ—¶é—´                     |

---

# ğŸŸ© **è¡¨ 3ï¼šagent_toolsï¼ˆå¤šå¯¹å¤šå…³è”ï¼‰**

### ç”¨é€”

ä¸€ä¸ª Agent å¯ä»¥ç»‘å®šå¤šä¸ª Toolsã€‚
ä¸€ä¸ª Tool ä¹Ÿå¯ä»¥è¢«å¤šä¸ª Agent å…±äº«ã€‚

### å­—æ®µå®šä¹‰

| å­—æ®µ       | ç±»å‹             | è¯´æ˜        |
| -------- | -------------- | --------- |
| id       | PK, UUID       | è®°å½• ID     |
| agent_id | FK â†’ agents.id | å…³è”çš„ agent |
| tool_id  | FK â†’ tools.id  | å…³è”çš„ tool  |

> ä¹Ÿå¯ç”¨è”åˆä¸»é”® `(agent_id, tool_id)`ï¼Œä½† UUID æ›´çµæ´»ã€‚

---

# ğŸŸ§ **è¡¨ 4ï¼štasksï¼ˆä»»åŠ¡ï¼‰**

### ç”¨é€”

å­˜å‚¨æ¯æ¬¡ç”¨æˆ·è§¦å‘çš„ä»»åŠ¡æ‰§è¡Œï¼ˆç±»ä¼¼ä¸€æ¬¡ Claude è°ƒç”¨ï¼‰ã€‚

### å­—æ®µå®šä¹‰

| å­—æ®µ          | ç±»å‹                                   | è¯´æ˜                       |
| ----------- | ------------------------------------ | ------------------------ |
| id          | PK, UUID                             | Task ID                  |
| agent_id    | FK â†’ agents.id                       | ä½¿ç”¨çš„ agent                |
| input_text  | text                                 | ç”¨æˆ·è¾“å…¥ï¼ˆå¦‚â€œè¯·åˆ†æ ETH ä»·æ ¼â€ï¼‰      |
| status      | enum(pending/running/failed/success) |                          |
| result_text | text or JSON                         | æœ€ç»ˆç»“æœ                     |
| meta        | JSON                                 | ä»»åŠ¡é¢å¤–ä¿¡æ¯ï¼ˆå¦‚ riskLevel=highï¼‰ |
| created_at  | datetime                             |                          |
| updated_at  | datetime                             |                          |

---

# ğŸŸ¨ **è¡¨ 5ï¼štask_logsï¼ˆReAct æ­¥éª¤æ—¥å¿—ï¼‰**

### ç”¨é€”

å­˜å‚¨ Agent çš„ **thought / action / observation** æ€è€ƒè¿‡ç¨‹ã€‚

å‰ç«¯ UI ç”¨è¿™ä¸ªå±•ç¤ºã€Œæ‰§è¡Œè¿‡ç¨‹ã€ã€‚

### å­—æ®µå®šä¹‰

| å­—æ®µ          | ç±»å‹                                 | è¯´æ˜   |
| ----------- | ---------------------------------- | ---- |
| id          | PK, UUID                           |      |
| task_id     | FK â†’ tasks.id                      |      |
| step_number | int                                | é€’å¢æ­¥æ•° |
| type        | enum(thought, action, observation) |      |
| content     | TEXT/JSON                          | å…·ä½“å†…å®¹ |
| created_at  | datetime                           |      |

**ç¤ºä¾‹å†…å®¹ï¼š**

**thought**

```json
"æˆ‘éœ€è¦æŸ¥è¯¢å½“å‰ ETH ä»·æ ¼"
```

**action**

```json
{
  "tool": "tool_http",
  "input": {"url": "..."}
}
```

**observation**

```json
{"price": 2486.27}
```

---

# ğŸŸ« **è¡¨ 6ï¼štool_execution_logsï¼ˆæ¯æ¬¡å·¥å…·å®é™…æ‰§è¡Œçš„å®¡è®¡è¡¨ï¼‰**

### ç”¨é€”

æ¯æ¬¡å·¥å…·è°ƒç”¨éƒ½è®°å½•ä¸€æ¡ Logï¼Œç”¨äºï¼š

* å®‰å…¨å®¡è®¡
* äº‹åå›æ”¾
* å·¥å…·å¼‚å¸¸åˆ†æ

### å­—æ®µå®šä¹‰

| å­—æ®µ            | ç±»å‹            | è¯´æ˜        |
| ------------- | ------------- | --------- |
| id            | PK, UUID      |           |
| task_id       | FK â†’ tasks.id | å±äºå“ªä¸ª Task |
| tool_id       | FK â†’ tools.id | è°ƒç”¨çš„ Tool  |
| input_params  | JSON          | è°ƒç”¨å‚æ•°      |
| output        | JSON          | å·¥å…·è¿”å›      |
| error_message | string?       | å¼‚å¸¸ä¿¡æ¯ï¼ˆå¦‚å¤±è´¥ï¼‰ |
| created_at    | datetime      |           |

---

# ğŸ§  ER å›¾è®¾è®¡çš„ä¼˜ç‚¹

### âœ” è‡ªåŠ¨åŒ– Agent çš„æ‰€æœ‰æ•°æ®éƒ½å¯è¿½è¸ª

### âœ” å·¥å…·è°ƒç”¨èƒ½ç‹¬ç«‹å®¡è®¡ï¼ˆæœ€é‡è¦ï¼‰

### âœ” ä¸ Claude API æˆ– OpenAI ReAct æ‰§è¡Œæ¨¡å‹ 100% å¯¹é½

### âœ” å¯æ‰©å±•åˆ°ã€Œå¤š Agent äº’ç›¸è°ƒç”¨ã€ã€ŒWorkflow DAGã€

### âœ” UI å¯å®æ—¶å±•ç¤ºä»»åŠ¡æ‰§è¡Œæ¯ä¸€æ­¥
